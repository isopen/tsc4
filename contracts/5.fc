{-
  TASK 5 - Fibonacci sequence
  Implement a function that generates the Fibonacci
  sequence from N to N+K terms (0<=N<=370; 0<=N+K<=371; 0<=K<=255).
  The first two terms of the Fibonacci sequence are F_0 = 0 and F_1 = 1,
  and the rest are defined as F_n = F_(n-1) + F_(n-2).
  The resulting Fibonacci sequence should be stored in a tuple.
  For example, a request with N = 1 and K = 3 should return a tuple [1, 1, 2],
  and a request with N = 201 and K = 4 should return a tuple
  [453973694165307953197296969697410619233826,
  734544867157818093234908902110449296423351,
  1188518561323126046432205871807859915657177,
  1923063428480944139667114773918309212080528]
-}

() recv_internal() {
}

;; testable
(tuple) fibonacci_sequence (int n, int k) method_id {
  if (n < 0) {
    return empty_tuple();
  }
  elseif (k < 0) {
    return empty_tuple();
  }
  elseif (n + k > 371) {
    return empty_tuple();
  }
  elseif (n > 371) {
    return empty_tuple();
  }
  elseif (k > 255) {
    return empty_tuple();
  }

  tuple fib = empty_tuple();
  int f0 = 0;
  int f1 = 1;
  int lock = 1;
  int i = 0;
  while (i < n + k) {
    if (i >= n) {
      lock = 0;
      if (i == 265) { fib~tpush(10770594215935749279482183257489712959102052723690265265); }
      elseif (i == 266) { fib~tpush(17427187520417066673081023209641459549125606105821258513); }
      elseif (i == 267) { fib~tpush(28197781736352815952563206467131172508227658829511523778); }
      elseif (i == 268) { fib~tpush(45624969256769882625644229676772632057353264935332782291); }
      elseif (i == 269) { fib~tpush(73822750993122698578207436143903804565580923764844306069); }
      elseif (i == 270) { fib~tpush(119447720249892581203851665820676436622934188700177088360); }
      elseif (i == 271) { fib~tpush(193270471243015279782059101964580241188515112465021394429); }
      elseif (i == 272) { fib~tpush(312718191492907860985910767785256677811449301165198482789); }
      elseif (i == 273) { fib~tpush(505988662735923140767969869749836918999964413630219877218); }
      elseif (i == 274) { fib~tpush(818706854228831001753880637535093596811413714795418360007); }
      elseif (i == 275) { fib~tpush(1324695516964754142521850507284930515811378128425638237225); }
      elseif (i == 276) { fib~tpush(2143402371193585144275731144820024112622791843221056597232); }
      elseif (i == 277) { fib~tpush(3468097888158339286797581652104954628434169971646694834457); }
      elseif (i == 278) { fib~tpush(5611500259351924431073312796924978741056961814867751431689); }
      elseif (i == 279) { fib~tpush(9079598147510263717870894449029933369491131786514446266146); }
      elseif (i == 280) { fib~tpush(14691098406862188148944207245954912110548093601382197697835); }
      elseif (i == 281) { fib~tpush(23770696554372451866815101694984845480039225387896643963981); }
      elseif (i == 282) { fib~tpush(38461794961234640015759308940939757590587318989278841661816); }
      elseif (i == 283) { fib~tpush(62232491515607091882574410635924603070626544377175485625797); }
      elseif (i == 284) { fib~tpush(100694286476841731898333719576864360661213863366454327287613); }
      elseif (i == 285) { fib~tpush(162926777992448823780908130212788963731840407743629812913410); }
      elseif (i == 286) { fib~tpush(263621064469290555679241849789653324393054271110084140201023); }
      elseif (i == 287) { fib~tpush(426547842461739379460149980002442288124894678853713953114433); }
      elseif (i == 288) { fib~tpush(690168906931029935139391829792095612517948949963798093315456); }
      elseif (i == 289) { fib~tpush(1116716749392769314599541809794537900642843628817512046429889); }
      elseif (i == 290) { fib~tpush(1806885656323799249738933639586633513160792578781310139745345); }
      elseif (i == 291) { fib~tpush(2923602405716568564338475449381171413803636207598822186175234); }
      elseif (i == 292) { fib~tpush(4730488062040367814077409088967804926964428786380132325920579); }
      elseif (i == 293) { fib~tpush(7654090467756936378415884538348976340768064993978954512095813); }
      elseif (i == 294) { fib~tpush(12384578529797304192493293627316781267732493780359086838016392); }
      elseif (i == 295) { fib~tpush(20038668997554240570909178165665757608500558774338041350112205); }
      elseif (i == 296) { fib~tpush(32423247527351544763402471792982538876233052554697128188128597); }
      elseif (i == 297) { fib~tpush(52461916524905785334311649958648296484733611329035169538240802); }
      elseif (i == 298) { fib~tpush(84885164052257330097714121751630835360966663883732297726369399); }
      elseif (i == 299) { fib~tpush(137347080577163115432025771710279131845700275212767467264610201); }
      elseif (i == 300) { fib~tpush(222232244629420445529739893461909967206666939096499764990979600); }
      elseif (i == 301) { fib~tpush(359579325206583560961765665172189099052367214309267232255589801); }
      elseif (i == 302) { fib~tpush(581811569836004006491505558634099066259034153405766997246569401); }
      elseif (i == 303) { fib~tpush(941390895042587567453271223806288165311401367715034229502159202); }
      elseif (i == 304) { fib~tpush(1523202464878591573944776782440387231570435521120801226748728603); }
      elseif (i == 305) { fib~tpush(2464593359921179141398048006246675396881836888835835456250887805); }
      elseif (i == 306) { fib~tpush(3987795824799770715342824788687062628452272409956636682999616408); }
      elseif (i == 307) { fib~tpush(6452389184720949856740872794933738025334109298792472139250504213); }
      elseif (i == 308) { fib~tpush(10440185009520720572083697583620800653786381708749108822250120621); }
      elseif (i == 309) { fib~tpush(16892574194241670428824570378554538679120491007541580961500624834); }
      elseif (i == 310) { fib~tpush(27332759203762391000908267962175339332906872716290689783750745455); }
      elseif (i == 311) { fib~tpush(44225333398004061429732838340729878012027363723832270745251370289); }
      elseif (i == 312) { fib~tpush(71558092601766452430641106302905217344934236440122960529002115744); }
      elseif (i == 313) { fib~tpush(115783425999770513860373944643635095356961600163955231274253486033); }
      elseif (i == 314) { fib~tpush(187341518601536966291015050946540312701895836604078191803255601777); }
      elseif (i == 315) { fib~tpush(303124944601307480151388995590175408058857436768033423077509087810); }
      elseif (i == 316) { fib~tpush(490466463202844446442404046536715720760753273372111614880764689587); }
      elseif (i == 317) { fib~tpush(793591407804151926593793042126891128819610710140145037958273777397); }
      elseif (i == 318) { fib~tpush(1284057871006996373036197088663606849580363983512256652839038466984); }
      elseif (i == 319) { fib~tpush(2077649278811148299629990130790497978399974693652401690797312244381); }
      elseif (i == 320) { fib~tpush(3361707149818144672666187219454104827980338677164658343636350711365); }
      elseif (i == 321) { fib~tpush(5439356428629292972296177350244602806380313370817060034433662955746); }
      elseif (i == 322) { fib~tpush(8801063578447437644962364569698707634360652047981718378070013667111); }
      elseif (i == 323) { fib~tpush(14240420007076730617258541919943310440740965418798778412503676622857); }
      elseif (i == 324) { fib~tpush(23041483585524168262220906489642018075101617466780496790573690289968); }
      elseif (i == 325) { fib~tpush(37281903592600898879479448409585328515842582885579275203077366912825); }
      elseif (i == 326) { fib~tpush(60323387178125067141700354899227346590944200352359771993651057202793); }
      elseif (i == 327) { fib~tpush(97605290770725966021179803308812675106786783237939047196728424115618); }
      elseif (i == 328) { fib~tpush(157928677948851033162880158208040021697730983590298819190379481318411); }
      elseif (i == 329) { fib~tpush(255533968719576999184059961516852696804517766828237866387107905434029); }
      elseif (i == 330) { fib~tpush(413462646668428032346940119724892718502248750418536685577487386752440); }
      elseif (i == 331) { fib~tpush(668996615388005031531000081241745415306766517246774551964595292186469); }
      elseif (i == 332) { fib~tpush(1082459262056433063877940200966638133809015267665311237542082678938909); }
      elseif (i == 333) { fib~tpush(1751455877444438095408940282208383549115781784912085789506677971125378); }
      elseif (i == 334) { fib~tpush(2833915139500871159286880483175021682924797052577397027048760650064287); }
      elseif (i == 335) { fib~tpush(4585371016945309254695820765383405232040578837489482816555438621189665); }
      elseif (i == 336) { fib~tpush(7419286156446180413982701248558426914965375890066879843604199271253952); }
      elseif (i == 337) { fib~tpush(12004657173391489668678522013941832147005954727556362660159637892443617); }
      elseif (i == 338) { fib~tpush(19423943329837670082661223262500259061971330617623242503763837163697569); }
      elseif (i == 339) { fib~tpush(31428600503229159751339745276442091208977285345179605163923475056141186); }
      elseif (i == 340) { fib~tpush(50852543833066829834000968538942350270948615962802847667687312219838755); }
      elseif (i == 341) { fib~tpush(82281144336295989585340713815384441479925901307982452831610787275979941); }
      elseif (i == 342) { fib~tpush(133133688169362819419341682354326791750874517270785300499298099495818696); }
      elseif (i == 343) { fib~tpush(215414832505658809004682396169711233230800418578767753330908886771798637); }
      elseif (i == 344) { fib~tpush(348548520675021628424024078524038024981674935849553053830206986267617333); }
      elseif (i == 345) { fib~tpush(563963353180680437428706474693749258212475354428320807161115873039415970); }
      elseif (i == 346) { fib~tpush(912511873855702065852730553217787283194150290277873860991322859307033303); }
      elseif (i == 347) { fib~tpush(1476475227036382503281437027911536541406625644706194668152438732346449273); }
      elseif (i == 348) { fib~tpush(2388987100892084569134167581129323824600775934984068529143761591653482576); }
      elseif (i == 349) { fib~tpush(3865462327928467072415604609040860366007401579690263197296200323999931849); }
      elseif (i == 350) { fib~tpush(6254449428820551641549772190170184190608177514674331726439961915653414425); }
      elseif (i == 351) { fib~tpush(10119911756749018713965376799211044556615579094364594923736162239653346274); }
      elseif (i == 352) { fib~tpush(16374361185569570355515148989381228747223756609038926650176124155306760699); }
      elseif (i == 353) { fib~tpush(26494272942318589069480525788592273303839335703403521573912286394960106973); }
      elseif (i == 354) { fib~tpush(42868634127888159424995674777973502051063092312442448224088410550266867672); }
      elseif (i == 355) { fib~tpush(69362907070206748494476200566565775354902428015845969798000696945226974645); }
      elseif (i == 356) { fib~tpush(112231541198094907919471875344539277405965520328288418022089107495493842317); }
      elseif (i == 357) { fib~tpush(181594448268301656413948075911105052760867948344134387820089804440720816962); }
      elseif (i == 358) { fib~tpush(293825989466396564333419951255644330166833468672422805842178911936214659279); }
      elseif (i == 359) { fib~tpush(475420437734698220747368027166749382927701417016557193662268716376935476241); }
      elseif (i == 360) { fib~tpush(769246427201094785080787978422393713094534885688979999504447628313150135520); }
      elseif (i == 361) { fib~tpush(1244666864935793005828156005589143096022236302705537193166716344690085611761); }
      elseif (i == 362) { fib~tpush(2013913292136887790908943984011536809116771188394517192671163973003235747281); }
      elseif (i == 363) { fib~tpush(3258580157072680796737099989600679905139007491100054385837880317693321359042); }
      elseif (i == 364) { fib~tpush(5272493449209568587646043973612216714255778679494571578509044290696557106323); }
      elseif (i == 365) { fib~tpush(8531073606282249384383143963212896619394786170594625964346924608389878465365); }
      elseif (i == 366) { fib~tpush(13803567055491817972029187936825113333650564850089197542855968899086435571688); }
      elseif (i == 367) { fib~tpush(22334640661774067356412331900038009953045351020683823507202893507476314037053); }
      elseif (i == 368) { fib~tpush(36138207717265885328441519836863123286695915870773021050058862406562749608741); }
      elseif (i == 369) { fib~tpush(58472848379039952684853851736901133239741266891456844557261755914039063645794); }
      elseif (i == 370) { fib~tpush(94611056096305838013295371573764256526437182762229865607320618320601813254535); }
      else {
        lock = 1;
        fib~tpush(f0);
      }
    }
    if (lock) {
      int temp = f0 + f1;
      f0 = f1;
      f1 = temp;
    }
    i += 1;
  }

  return fib;
}

